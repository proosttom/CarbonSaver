<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CarbonSaver - Load Profile Optimizer</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üå± CarbonSaver</h1>
            <p class="subtitle">Optimize your load schedule to minimize carbon emissions</p>
        </header>

        <main>
            <!-- Input Section -->
            <section class="card input-section">
                <h2>Load Profile Configuration</h2>
                <form id="optimizeForm">
                    <div class="form-group">
                        <label for="powerKw">
                            <span class="label-text">Power (kW)</span>
                            <span class="label-hint">Total power consumption</span>
                        </label>
                        <input type="number" id="powerKw" name="powerKw" value="250" min="1" required>
                    </div>

                    <div class="form-group">
                        <label for="durationHours">
                            <span class="label-text">Duration (hours)</span>
                            <span class="label-hint">How long the load runs</span>
                        </label>
                        <input type="number" id="durationHours" name="durationHours" value="4" min="1" max="24" required>
                    </div>

                    <div class="form-group">
                        <label for="standardStartHour">
                            <span class="label-text">Standard Start Hour</span>
                            <span class="label-hint">Your usual start time (0-23)</span>
                        </label>
                        <input type="number" id="standardStartHour" name="standardStartHour" value="7" min="0" max="23" required>
                    </div>

                    <button type="submit" class="btn btn-primary" id="optimizeBtn">
                        <span class="btn-text">Get Forecast & Optimize</span>
                        <span class="spinner" style="display: none;">‚è≥</span>
                    </button>
                </form>
            </section>

            <!-- Results Section -->
            <section class="card results-section" id="resultsSection" style="display: none;">
                <h2>Optimization Results</h2>
                
                <!-- Date Info -->
                <div class="date-info" id="dateInfo"></div>

                <!-- Comparison Cards -->
                <div class="comparison-grid">
                    <!-- Standard Profile Card -->
                    <div class="profile-card standard-card">
                        <div class="profile-header">
                            <h3>üìÖ Standard Schedule</h3>
                        </div>
                        <div class="profile-body">
                            <div class="profile-stat">
                                <span class="stat-label">Start Time</span>
                                <span class="stat-value" id="standardStartTime">--:--</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">End Time</span>
                                <span class="stat-value" id="standardEndTime">--:--</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">Energy</span>
                                <span class="stat-value" id="standardEnergy">-- kWh</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">Carbon Intensity</span>
                                <span class="stat-value" id="standardIntensity">-- g/kWh</span>
                            </div>
                            <div class="profile-stat highlight">
                                <span class="stat-label">Total Emissions</span>
                                <span class="stat-value" id="standardEmissions">-- kg CO‚ÇÇ</span>
                            </div>
                        </div>
                    </div>

                    <!-- Optimal Profile Card -->
                    <div class="profile-card optimal-card">
                        <div class="profile-header">
                            <h3>‚úÖ Optimal Schedule</h3>
                        </div>
                        <div class="profile-body">
                            <div class="profile-stat">
                                <span class="stat-label">Start Time</span>
                                <span class="stat-value" id="optimalStartTime">--:--</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">End Time</span>
                                <span class="stat-value" id="optimalEndTime">--:--</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">Energy</span>
                                <span class="stat-value" id="optimalEnergy">-- kWh</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">Carbon Intensity</span>
                                <span class="stat-value" id="optimalIntensity">-- g/kWh</span>
                            </div>
                            <div class="profile-stat highlight">
                                <span class="stat-label">Total Emissions</span>
                                <span class="stat-value" id="optimalEmissions">-- kg CO‚ÇÇ</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Savings Banner -->
                <div class="savings-banner" id="savingsBanner">
                    <div class="savings-main">
                        <span class="savings-emoji">üíö</span>
                        <div>
                            <div class="savings-title">Emissions Saved</div>
                            <div class="savings-amount" id="savingsAmount">-- kg CO‚ÇÇ</div>
                        </div>
                    </div>
                    <div class="savings-details">
                        <div class="savings-detail">
                            <span class="detail-label">Reduction</span>
                            <span class="detail-value" id="savingsPct">--%</span>
                        </div>
                        <div class="savings-detail">
                            <span class="detail-label">Time Shift</span>
                            <span class="detail-value" id="timeShift">-- hours</span>
                        </div>
                        <div class="savings-detail">
                            <span class="detail-label">Equivalent</span>
                            <span class="detail-value" id="kmEquivalent">-- km driving</span>
                        </div>
                    </div>
                    <div class="recommendation" id="recommendation"></div>
                </div>

                <!-- Chart Section -->
                <div class="chart-container">
                    <h3>Hourly Carbon Intensity Forecast</h3>
                    <canvas id="carbonChart"></canvas>
                    <div class="chart-legend">
                        <span class="legend-item">
                            <span class="legend-color" style="background-color: rgba(54, 162, 235, 0.6);"></span>
                            Carbon Intensity
                        </span>
                        <span class="legend-item">
                            <span class="legend-color" style="background-color: rgba(255, 206, 86, 0.8);"></span>
                            Standard Schedule
                        </span>
                        <span class="legend-item">
                            <span class="legend-color" style="background-color: rgba(75, 192, 192, 0.8);"></span>
                            Optimal Schedule
                        </span>
                    </div>
                </div>
            </section>

            <!-- Error Section -->
            <section class="card error-section" id="errorSection" style="display: none;">
                <h2>‚ö†Ô∏è Error</h2>
                <p id="errorMessage"></p>
            </section>
        </main>

        <footer>
            <p>Powered by <a href="https://opendata.elia.be/" target="_blank">Elia Open Data</a></p>
            <p>¬© 2025 CarbonSaver POC - Energy Flexibility Market Demonstration</p>
        </footer>
    </div>

    <script src="script.js"></script>
</body>
</html>
