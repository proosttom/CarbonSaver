<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CarbonSaver - Time Shift Carbon Optimizer</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="sidebar-logo">
            <h1>üå± CarbonSaver</h1>
            <p class="tagline">Energy Optimizer</p>
        </div>
        <nav class="sidebar-nav">
            <a href="#top" class="nav-item active" id="navDashboard">
                <span>üìä</span> Dashboard
            </a>
            <a href="#optimize" class="nav-item" id="navOptimize">
                <span>‚öôÔ∏è</span> Optimize
            </a>
            <a href="#results" class="nav-item" id="navAnalytics">
                <span>üìà</span> Analytics
            </a>
            <a href="https://github.com/proosttom/CarbonSaver" target="_blank" class="nav-item" id="navAbout">
                <span>‚ÑπÔ∏è</span> Source & Info
            </a>
        </nav>
        <div class="sidebar-footer">
            <p>Powered by <a href="https://opendata.elia.be/" target="_blank">Elia Data</a></p>
            <p class="copyright">¬© 2025 CarbonSaver</p>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="main-content" id="top">
        <header class="content-header">
            <div class="header-title">
                <h2>Time Shift Carbon Optimizer</h2>
            </div>
            <div class="header-meta">
                <span>TSO zone: Belgium Grid ‚Ä¢ Elia Day-ahead Data</span>
            </div>
        </header>

        <main>
            <!-- Top Row: Default Load Profile + Live Grid Production -->
            <div class="top-row-grid">
                <!-- Input Section -->
                <section class="card input-section" id="optimize">
                    <div class="realtime-header">
                        <h3>‚öôÔ∏è Default Load Profile</h3>
                        <div class="realtime-meta">
                            <div class="realtime-timestamp" id="forecastTimestamp">--</div>
                            <div class="realtime-source" id="forecastSource">Source: Elia</div>
                        </div>
                    </div>
                    <form id="optimizeForm">
                        <div class="form-group">
                            <label for="powerKw">
                                <span class="label-text">Power (kW)</span>
                                <span class="label-hint">Total power consumption</span>
                            </label>
                            <input type="number" id="powerKw" name="powerKw" value="250" min="1" required>
                        </div>

                        <div class="form-group">
                            <label for="durationHours">
                                <span class="label-text">Duration (hours)</span>
                                <span class="label-hint">How long the load runs</span>
                            </label>
                            <input type="number" id="durationHours" name="durationHours" value="3" min="1" max="24" required>
                        </div>

                        <div class="form-group">
                            <label for="standardStartHour">
                                <span class="label-text">Standard Start Hour</span>
                                <span class="label-hint">Your usual start time (0-23)</span>
                            </label>
                            <input type="number" id="standardStartHour" name="standardStartHour" value="6" min="0" max="23" required>
                        </div>

                        <button type="submit" class="btn btn-primary" id="optimizeBtn">
                            <span class="btn-text">Get Forecast & Optimize</span>
                            <span class="spinner" style="display: none;">‚è≥</span>
                        </button>
                    </form>
                </section>

                <!-- Real-time Production Dashboard - Compact Version -->
                <section class="card realtime-section-compact" id="realtimeProduction">
                    <div class="realtime-header">
                        <h3>üîå Live Grid Production</h3>
                        <div class="realtime-meta">
                            <div class="realtime-timestamp" id="realtimeTimestamp">Loading...</div>
                            <div class="realtime-source" id="realtimeSource">Source: ENTSO-E</div>
                        </div>
                    </div>
                    <div class="production-grid-compact">
                        <div class="production-item">
                            <span class="production-icon-sm">üå¨Ô∏è</span>
                            <div class="production-info">
                                <span class="production-label-sm">Wind</span>
                                <span class="production-value-sm" id="windProduction">--</span>
                            </div>
                        </div>
                        <div class="production-item">
                            <span class="production-icon-sm">‚òÄÔ∏è</span>
                            <div class="production-info">
                                <span class="production-label-sm">Solar</span>
                                <span class="production-value-sm" id="solarProduction">--</span>
                            </div>
                        </div>
                        <div class="production-item">
                            <span class="production-icon-sm">‚öõÔ∏è</span>
                            <div class="production-info">
                                <span class="production-label-sm">Nuclear</span>
                                <span class="production-value-sm" id="nuclearProduction">--</span>
                            </div>
                        </div>
                        <div class="production-item">
                            <span class="production-icon-sm">üî•</span>
                            <div class="production-info">
                                <span class="production-label-sm">Gas</span>
                                <span class="production-value-sm" id="gasProduction">--</span>
                            </div>
                        </div>
                        <div class="production-item">
                            <span class="production-icon-sm">üíß</span>
                            <div class="production-info">
                                <span class="production-label-sm">Hydro</span>
                                <span class="production-value-sm" id="hydroProduction">--</span>
                            </div>
                        </div>
                        <div class="production-item">
                            <span class="production-icon-sm">üåø</span>
                            <div class="production-info">
                                <span class="production-label-sm">Biomass</span>
                                <span class="production-value-sm" id="biomassProduction">--</span>
                            </div>
                        </div>
                        <div class="production-item">
                            <span class="production-icon-sm">üóëÔ∏è</span>
                            <div class="production-info">
                                <span class="production-label-sm">Waste</span>
                                <span class="production-value-sm" id="wasteProduction">--</span>
                            </div>
                        </div>
                        <div class="production-item">
                            <span class="production-icon-sm">üì¶</span>
                            <div class="production-info">
                                <span class="production-label-sm">Other</span>
                                <span class="production-value-sm" id="otherProduction">--</span>
                            </div>
                        </div>
                        <div class="production-item highlight">
                            <span class="production-icon-sm">‚ö°</span>
                            <div class="production-info">
                                <span class="production-label-sm">Total</span>
                                <span class="production-value-sm total" id="totalProduction">--</span>
                            </div>
                        </div>
                        <div class="production-item highlight">
                            <span class="production-icon-sm">üå°Ô∏è</span>
                            <div class="production-info">
                                <span class="production-label-sm">Intensity</span>
                                <span class="production-value-sm intensity" id="carbonIntensityNow">--</span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Results Section -->
            <section class="card results-section" id="results" style="display: none;">
                <h2>Optimization Results</h2>
                
                <!-- Date Info -->
                <div class="date-info" id="dateInfo"></div>

                <!-- Comparison Cards -->
                <div class="comparison-grid">
                    <!-- Standard Profile Card -->
                    <div class="profile-card standard-card">
                        <div class="profile-header">
                            <h3>üìÖ Standard Schedule</h3>
                        </div>
                        <div class="profile-body">
                            <div class="profile-stat">
                                <span class="stat-label">Start Time</span>
                                <span class="stat-value" id="standardStartTime">--:--</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">End Time</span>
                                <span class="stat-value" id="standardEndTime">--:--</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">Energy</span>
                                <span class="stat-value" id="standardEnergy">-- kWh</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">Carbon Intensity</span>
                                <span class="stat-value" id="standardIntensity">-- g/kWh</span>
                            </div>
                            <div class="profile-stat highlight">
                                <span class="stat-label">Total Emissions</span>
                                <span class="stat-value" id="standardEmissions">-- kg CO‚ÇÇ</span>
                            </div>
                        </div>
                    </div>

                    <!-- Optimal Profile Card -->
                    <div class="profile-card optimal-card">
                        <div class="profile-header">
                            <h3>‚úÖ Optimal Schedule</h3>
                        </div>
                        <div class="profile-body">
                            <div class="profile-stat">
                                <span class="stat-label">Start Time</span>
                                <span class="stat-value" id="optimalStartTime">--:--</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">End Time</span>
                                <span class="stat-value" id="optimalEndTime">--:--</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">Energy</span>
                                <span class="stat-value" id="optimalEnergy">-- kWh</span>
                            </div>
                            <div class="profile-stat">
                                <span class="stat-label">Carbon Intensity</span>
                                <span class="stat-value" id="optimalIntensity">-- g/kWh</span>
                            </div>
                            <div class="profile-stat highlight">
                                <span class="stat-label">Total Emissions</span>
                                <span class="stat-value" id="optimalEmissions">-- kg CO‚ÇÇ</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Savings Banner -->
                <div class="savings-banner" id="savingsBanner">
                    <div class="savings-main">
                        <span class="savings-emoji">üíö</span>
                        <div>
                            <div class="savings-title">Emissions Saved</div>
                            <div class="savings-amount" id="savingsAmount">-- kg CO‚ÇÇ</div>
                        </div>
                    </div>
                    <div class="savings-details">
                        <div class="savings-detail">
                            <span class="detail-label">Reduction</span>
                            <span class="detail-value" id="savingsPct">--%</span>
                        </div>
                        <div class="savings-detail">
                            <span class="detail-label">Time Shift</span>
                            <span class="detail-value" id="timeShift">-- hours</span>
                        </div>
                        <div class="savings-detail">
                            <span class="detail-label">Equivalent</span>
                            <span class="detail-value" id="kmEquivalent">-- km driving</span>
                        </div>
                    </div>
                    <div class="recommendation" id="recommendation"></div>
                </div>

                <!-- Chart Section -->
                <div class="chart-container">
                    <h3>Hourly Carbon Intensity Forecast</h3>
                    <canvas id="carbonChart"></canvas>
                    <div class="chart-legend">
                        <span class="legend-item">
                            <span class="legend-color" style="background-color: rgba(54, 162, 235, 0.6);"></span>
                            Carbon Intensity
                        </span>
                        <span class="legend-item">
                            <span class="legend-color" style="background-color: rgba(255, 206, 86, 0.8);"></span>
                            Standard Schedule
                        </span>
                        <span class="legend-item">
                            <span class="legend-color" style="background-color: rgba(75, 192, 192, 0.8);"></span>
                            Optimal Schedule
                        </span>
                    </div>
                </div>
            </section>

            <!-- Error Section -->
            <section class="card error-section" id="errorSection" style="display: none;">
                <h2>‚ö†Ô∏è Error</h2>
                <p id="errorMessage"></p>
            </section>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
